{
    "sourceFile": "resources/views/reservation.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1726984607995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1726984607995,
            "name": "Commit-0",
            "content": "@extends('layouts.app')\r\n\r\n@section('title', 'Reservation')\r\n\r\n@section('content')\r\n\r\n<section id=\"reservation-info\" class=\"py-20 bg-white\">\r\n    <div class=\"container mx-auto text-center\">\r\n        <h2 class=\"text-3xl font-bold mb-8\">MEUD</h2>\r\n        <div class=\"location-info mb-8\">\r\n            <p class=\"text-lg font-semibold\">Room 301, How Building, 22 Gangnam-daero 162-gil, Gangnam-gu, Seoul</p>\r\n        </div>\r\n        <div class=\"contact-info\">\r\n            <p class=\"text-xl\">TEL : <span class=\"font-bold\">02-545-3655</span></p>\r\n        </div>\r\n    </div>\r\n    <div class=\"designer-info text-center mt-8 mb-8\">\r\n        <img src=\"https://images.pexels.com/photos/27913669/pexels-photo-27913669.jpeg?auto=compress&cs=tinysrgb&w=300&lazy=load\" alt=\"Designer\" style=\"display: block; margin: auto; max-width: 100%; height: auto;\">\r\n        <h3 class=\"text-xl font-bold mt-4\">Designer Taeyull</h3>\r\n    </div>\r\n    \r\n    <div class=\"container mx-auto max-w-xl mt-10\">\r\n        <div class=\"calendar-container\">\r\n        <button class=\"prev\"><</button> <!-- Left arrow -->\r\n        <span class=\"current-month-year\"></span>\r\n        <button class=\"next\">></button> <!-- Right arrow -->\r\n            <table class=\"calendar\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>S</th>\r\n                        <th>M</th>\r\n                        <th>T</th>\r\n                        <th>W</th>\r\n                        <th>T</th>\r\n                        <th>F</th>\r\n                        <th>S</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <form action=\"{{ route('reservations.store') }}\" method=\"POST\" class=\"space-y-4\">\r\n        <input type=\"hidden\" name=\"request_date\" />\r\n        <input type=\"hidden\" name=\"request_time\" />\r\n            @csrf\r\n            <div>\r\n                <input type=\"text\" name=\"email\" id=\"email\" class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" placeholder=\"e-mail\" required>\r\n            </div>\r\n            <div>\r\n                <select name=\"service\" id=\"service\" class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\">\r\n                    <option value=\"\">Select</option>\r\n                    <option value=\"cut\">Cut</option>\r\n                    <option value=\"color\">Color</option>\r\n                    <option value=\"perm\">Perm</option>\r\n                </select>\r\n            </div>\r\n            <div id=\"time-slots\" class=\"grid grid-cols-3 gap-4 mt-4\"></div>\r\n            <button type=\"submit\" class=\"w-full py-3 px-4 bg-yellow-400 text-white font-bold rounded hover:bg-yellow-500\">예약하기</button>\r\n        </form>\r\n    </div>\r\n</section>\r\n\r\n<script>\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const calendarBody = document.querySelector('.calendar tbody');\r\n    const currentMonthYear = document.querySelector('.current-month-year');\r\n    let currentDate = new Date();\r\n    let lastSelected = null;  // 마지막으로 선택된 날짜 셀을 추적하기 위한 변수\r\n    const timeSlotsContainer = document.getElementById('time-slots');\r\n    const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n                    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    function generateCalendar(date) {\r\n        calendarBody.innerHTML = '';\r\n        currentMonthYear.textContent = `${months[date.getMonth()]} ${date.getFullYear()}`;\r\n\r\n        const firstDay = new Date(date.getFullYear(), date.getMonth(), 1).getDay();\r\n        const daysInMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\r\n\r\n        let row = calendarBody.insertRow();\r\n        let count = 0;\r\n\r\n        // 첫 주 시작 전 빈 칸 채우기\r\n        for (let i = 0; i < firstDay; i++) {\r\n            row.insertCell();\r\n            count++;\r\n        }\r\n\r\n        // 날짜 채우기\r\n        for (let day = 1; day <= daysInMonth; day++) {\r\n            if (count % 7 === 0) {\r\n                row = calendarBody.insertRow();\r\n            }\r\n            let cell = row.insertCell();\r\n            cell.textContent = day;\r\n            if ((count % 7) === 1) {  // 월요일 처리\r\n                cell.classList.add('disabled'); // 'disabled' 클래스 추가\r\n                cell.style.backgroundColor = '#e0e0e0'; // 회색 배경\r\n                cell.style.color = '#666666'; // 짙은 회색 텍스트\r\n            } else {\r\n                cell.classList.add('active');\r\n                cell.addEventListener('click', function() {\r\n                    if (lastSelected) {\r\n                        lastSelected.style.backgroundColor = '#fff'; // 이전 선택된 셀의 배경색을 초기화\r\n                        lastSelected.style.color = 'black'; // 이전 선택된 셀의 텍스트 색상을 초기화\r\n                    }\r\n                    this.style.backgroundColor = '#007bff'; // 선택된 셀의 배경색 변경\r\n                    this.style.color = 'white'; // 선택된 셀의 텍스트 색상 변경\r\n                    lastSelected = this; // 마지막으로 선택된 셀을 업데이트\r\n                    // 선택한 날짜에 대한 시간 슬롯을 표시\r\n                    showTimeSlots(date.getFullYear(), date.getMonth(), day);\r\n                });\r\n            }\r\n            count++;\r\n        }\r\n        \r\n        // 마지막 주 빈 칸 채우기\r\n        while (count % 7 !== 0) {\r\n            row.insertCell();\r\n            count++;\r\n        }\r\n    }\r\n\r\n    document.querySelector('.prev').addEventListener('click', function() {\r\n        currentDate.setMonth(currentDate.getMonth() - 1);\r\n        generateCalendar(currentDate);\r\n    });\r\n\r\n    document.querySelector('.next').addEventListener('click', function() {\r\n        currentDate.setMonth(currentDate.getMonth() + 1);\r\n        generateCalendar(currentDate);\r\n    });\r\n\r\n    calendarBody.addEventListener('click', function(event) {\r\n        if (event.target.classList.contains('active')) {\r\n            let selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), Number(event.target.textContent)+1);\r\n            document.querySelector('input[name=\"request_date\"]').value = selectedDate.toISOString().split('T')[0]; // 날짜 선택\r\n        }\r\n    });\r\n    generateCalendar(currentDate);\r\n});\r\n\r\nfunction showTimeSlots(year, month, day) {\r\n    const times = ['11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00', '16:30', '17:00', '17:30'];\r\n    const timeSlotsContainer = document.getElementById('time-slots');\r\n    let lastSelectedTime = null;  // 마지막으로 선택한 시간 버튼 추적\r\n    timeSlotsContainer.innerHTML = ''; // 이전 시간 슬롯 제거\r\n\r\n    // 해당 날짜의 예약된 시간을 서버에서 조회\r\n    fetch(`/get-reserved-times?date=${year}-${month + 1}-${day}`)\r\n        .then(response => response.json())\r\n        .then(reservedTimes => {\r\n            times.forEach(time => {\r\n                let timeButton = document.createElement('button');\r\n                timeButton.textContent = time;\r\n                timeButton.className = 'time-slot-button';\r\n                // 예약된 시간이면 버튼 비활성화\r\n                if (reservedTimes.includes(time+\":00\")) {\r\n                    timeButton.disabled = true;\r\n                    timeButton.classList.add('disabled');\r\n                } else {\r\n                    timeButton.addEventListener('click', function(event) {\r\n                        event.preventDefault(); // submit 방지\r\n                        if (lastSelectedTime) {\r\n                            lastSelectedTime.style.backgroundColor = ''; // 이전 선택한 버튼 초기화\r\n                            lastSelectedTime.style.color = '';\r\n                        }\r\n                        this.style.backgroundColor = '#007bff'; // 선택된 버튼 색상 변경\r\n                        this.style.color = 'white';\r\n                        lastSelectedTime = this; // 마지막으로 선택한 시간 업데이트\r\n                        document.querySelector('input[name=\"request_time\"]').value = `${time}`; // 시간 선택\r\n                    });\r\n                }\r\n                timeSlotsContainer.appendChild(timeButton);\r\n            });\r\n        });\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n.calendar-container {\r\n    text-align: center;\r\n    font-family: 'Arial', sans-serif;\r\n    margin: auto;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.1);\r\n    padding: 20px;\r\n}\r\n\r\n.calendar {\r\n    width: 100%;\r\n    border-collapse: collapse; /* Ensures the table cells are tightly packed */\r\n}\r\n\r\n.calendar th, .calendar td {\r\n    padding: 10px;\r\n    border-radius: 4px; /* Rounded corners for each cell */\r\n}\r\n\r\n.calendar th {\r\n    color: black;\r\n    border: 1px solid #ccc; /* Light border for each cell */\r\n}\r\n\r\n.calendar td {\r\n    cursor: pointer;\r\n    border: 1px solid #ccc; /* Light border for each cell */\r\n}\r\n\r\n.calendar td:hover {\r\n    background-color: #e8e8e8; /* Light grey background on hover */\r\n}\r\n\r\n.calendar td.active:hover {\r\n    background-color: #007bff; /* Blue background for active (selected) cells */\r\n    color: white; /* White text for readability */\r\n}\r\n\r\n.prev, .next {\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    padding: 20px;\r\n}\r\n\r\n.current-month-year {\r\n    font-size: 18px;\r\n    margin: 10px 0;\r\n    color: #333;\r\n}\r\n\r\n.time-slot-button {\r\n    padding: 8px 16px;\r\n    margin: 5px;\r\n    background-color: #f8f8f8; /* Light grey background for buttons */\r\n    border: 1px solid #ccc;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    transition: background-color 0.3s;\r\n}\r\n\r\n.time-slot-button:hover {\r\n    background-color: #e0e0e0; /* Darker grey on hover */\r\n}\r\n\r\n.time-slot-button.disabled {\r\n    background-color: #ccc; /* Greyed out for disabled buttons */\r\n    color: #666;\r\n    cursor: not-allowed; /* Indicates the button is not clickable */\r\n}\r\n\r\n</style>\r\n\r\n@endsection\r\n"
        }
    ]
}